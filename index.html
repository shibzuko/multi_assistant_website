<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <title>Настройки GPT</title>
</head>

<body class="container mt-4">

<form action="#" method="post" target="_blank">

    <!--МОДЕЛЬ GPT-->

    <h2>Системные настройки</h2>

    <fieldset class="form-group">
        <div class="legend-head"><legend>Выберите режим работы</legend></div>
       <div class="form-check">
            <input class="form-check-input" type="radio" name="mode" id="chatgpt" value="global_chatgpt" checked>
            <label class="form-check-label" for="chatgpt">ChatGPT</label>
        </div>

        <fieldset class="form-group form-group-transition open" id="chatgpt_settings">
            <div class="form-check-2">
                <input class="form-check-input" type="radio" name="model_gpt" id="gpt-4o-mini" value="gpt-4o-mini" checked>
                <label class="form-check-label" for="gpt-4o-mini">GPT-4o Mini</label>
            </div>
            <div class="form-check-2">
                <input class="form-check-input" type="radio" name="model_gpt" id="gpt-4o" value="gpt-4o">
                <label class="form-check-label" for="gpt-4o">GPT-4o</label>
            </div>
        </fieldset>

        <!--МОДЕЛЬ SPLITTER-->
        <div class="form-check">
            <input class="form-check-input" type="radio" name="mode" id="audio_splitter_lalal"
                   value="audio_splitter_lalal">
            <label class="form-check-label" for="audio_splitter_lalal">Удалить музыку из аудио/видео</label>
        </div>
        <fieldset class="form-group form-group-transition" id="splitter">
            <div class="form-check-2">
                <input class="form-check-input" type="radio" name="splitter_lalal" id="audio_splitter"
                       value="audio_splitter" checked>
                <label class="form-check-label" for="audio_splitter">Разделение вокала и инструментала</label>
            </div>
        </fieldset>

        <!--МОДЕЛЬ TTS-->

        <div class="form-check">
            <input class="form-check-input" type="radio" name="mode" id="generate_audio" value="tts">
            <label class="form-check-label" for="generate_audio">Текст в аудио Lite</label>
        </div>

        <fieldset class="form-group form-group-transition" id="tts_settings">
            <p>Модель озвучки:</p>
            <div class="form-check-2">

                <input class="form-check-input" type="radio" name="model_tts" id="tts-1" value="tts-1-1106" checked>
                <label class="form-check-label" for="tts-1">Обычное аудио</label>
            </div>
            <div class="form-check-2">
                <input class="form-check-input" type="radio" name="model_tts" id="tts-1-hd" value="tts-1-hd-1106">
                <label class="form-check-label" for="tts-1-hd">Аудио-HD</label>
            </div>
            <div class="form-check-2">
                <p>Голос озвучки:</p>
                <input class="form-check-input" type="radio" name="tts_voice" id="onyx" value="onyx" checked>
                <label class="form-check-label" for="onyx">Onyx</label>
            </div>
            <div class="form-check-2">
                <input class="form-check-input" type="radio" name="tts_voice" id="alloy" value="alloy">
                <label class="form-check-label" for="alloy">Alloy</label>
            </div>
            <div class="form-check-2">
                <input class="form-check-input" type="radio" name="tts_voice" id="echo" value="echo">
                <label class="form-check-label" for="echo">Echo</label>
            </div>
            <div class="form-check-2">
                <input class="form-check-input" type="radio" name="tts_voice" id="fable" value="fable">
                <label class="form-check-label" for="fable">Fable</label>
            </div>
            <div class="form-check-2">
                <input class="form-check-input" type="radio" name="tts_voice" id="nova" value="nova">
                <label class="form-check-label" for="nova">Nova</label>
            </div>
            <div class="form-check-2">
                <input class="form-check-input" type="radio" name="tts_voice" id="shimmer" value="shimmer">
                <label class="form-check-label" for="shimmer">Shimmer</label>
            </div>
        </fieldset>

        <!--МОДЕЛЬ ELEVEN-->

        <div class="form-check">
            <input class="form-check-input" type="radio" name="mode" id="generate_audio_2"
                   value="generate_audio_eleven">
            <label class="form-check-label" for="generate_audio_2">Текст в аудио Premium</label>
        </div>

        <fieldset class="form-group form-group-transition" id="eleven_settings">
            <p>Голос озвучки:</p>
            <div class="form-check-2">
                <input class="form-check-input" type="radio" name="eleven_voice" id="your_voice" value="your_voice">
                <label class="form-check-label" for="your_voice">Использовать свой голос</label>
            </div>
            <div class="form-check-2">
                <input class="form-check-input" type="radio" name="eleven_voice" id="marcus" value="marcus" checked>
                <label class="form-check-label" for="marcus">Marcus</label>
            </div>
            <div class="form-check-2">
                <input class="form-check-input" type="radio" name="eleven_voice" id="knightley" value="knightley">
                <label class="form-check-label" for="knightley">Knightley</label>
            </div>
            <div class="form-check-2">
                <input class="form-check-input" type="radio" name="eleven_voice" id="alex" value="alex">
                <label class="form-check-label" for="alex">Alex</label>
            </div>
            <div class="form-check-2">
                <input class="form-check-input" type="radio" name="eleven_voice" id="brian" value="brian">
                <label class="form-check-label" for="brian">Brian</label>
            </div>
            <div class="form-check-2">
                <input class="form-check-input" type="radio" name="eleven_voice" id="hades" value="hades">
                <label class="form-check-label" for="hades">Hades</label>
            </div>
            <div class="form-check-2">
                <input class="form-check-input" type="radio" name="eleven_voice" id="natasha" value="natasha">
                <label class="form-check-label" for="natasha">Natasha</label>
            </div>
            <div class="form-check-2">
                <input class="form-check-input" type="radio" name="eleven_voice" id="joanne" value="joanne">
                <label class="form-check-label" for="joanne">Joanne</label>
            </div>
        </fieldset>

        <!--МОДЕЛЬ WHISPER-->

        <div class="form-check">
            <input class="form-check-input" type="radio" name="mode" id="whisper-1" value="whisper-1">
            <label class="form-check-label" for="whisper-1">Аудио в текст</label>
        </div>
        <fieldset class="form-group form-group-transition" id="whisper_settings">
            <!-- настройки Whisper -->
        </fieldset>
    </fieldset>


<!--    <div class="form-group">-->
<!--        <label>*Модуль в разработке*</label>-->
<!--    </div>-->

    <div>
        <button type="button" class="btn btn-primary" id="sendModelSettings">Сохранить</button>
    </div>

</form>


<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
    let tg = window.Telegram.WebApp;
    tg.expand();
    document.querySelectorAll('input[name="mode"]').forEach(function(radio) {
        radio.addEventListener('change', function() {
            const chatGptSettings = document.getElementById('chatgpt_settings');
            const ttsSettings = document.getElementById('tts_settings');
            const elevenSettings = document.getElementById('eleven_settings');
            const whisperSettings = document.getElementById('whisper_settings');
            const splitterSettings = document.getElementById('splitter');

            chatGptSettings.classList.remove('open');
            ttsSettings.classList.remove('open');
            elevenSettings.classList.remove('open');
            whisperSettings.classList.remove('open');
            splitterSettings.classList.remove('open');

            if (this.value === 'global_chatgpt') {
                chatGptSettings.classList.add('open');
            } else if (this.value === 'tts') {
                ttsSettings.classList.add('open');
            } else if (this.value === 'generate_audio_eleven') {
                elevenSettings.classList.add('open');
            } else if (this.value === 'whisper222222') {
                whisperSettings.classList.add('open');
            } else if (this.value === 'audio_splitter_lalal') {
                splitterSettings.classList.add('open');
            }
        });
    });

    document.getElementById("sendModelSettings").addEventListener("click", function() {
        const form = document.querySelector('form');

        const mode = form['mode'].value;
        let model_gpt = form['model_gpt'] ? form['model_gpt'].value : undefined;
        let model_tts = form['model_tts'] ? form['model_tts'].value : undefined;
        let tts_voice = form.querySelector('input[name="tts_voice"]:checked') ? form.querySelector('input[name="tts_voice"]:checked').value : undefined;
        let eleven_voice = form.querySelector('input[name="eleven_voice"]:checked') ? form.querySelector('input[name="eleven_voice"]:checked').value : undefined;
        let splitter_lalal = form['splitter_lalal'] ? form['splitter_lalal'].value : undefined;


        const messageObj = {
            'mode': mode,
            'model_gpt': model_gpt,
            'model_tts': model_tts,
            'tts_voice': tts_voice,
            'eleven_voice': eleven_voice,
            'splitter_lalal': splitter_lalal
        };

        const messageObjFiltered = Object.fromEntries(Object.entries(messageObj).filter(([_, v]) => v != null));

        const message = JSON.stringify(messageObjFiltered);

        tg.sendData(message);
        tg.MainButton.setText("Настройки сохранены!");
        tg.MainButton.show();
        tg.close()
    });
</script>
</body>
</html>